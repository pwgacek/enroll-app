-- This script was generated by a beta version of the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.courses
(
    courseid smallint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 32767 CACHE 1 ),
    description character varying(255) COLLATE pg_catalog."default",
    etcs smallint NOT NULL,
    name character varying(255) COLLATE pg_catalog."default",
    numberofplaces smallint NOT NULL,
    semester smallint NOT NULL,
    faculty_facultyid smallint,
    lecturer_lecturerid smallint,
    weekday smallint NOT NULL,
    starttime time without time zone NOT NULL,
    endtime time without time zone NOT NULL,
    CONSTRAINT courses_pkey PRIMARY KEY (courseid)
);

CREATE TABLE IF NOT EXISTS public.faculties
(
    facultyid smallint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 32767 CACHE 1 ),
    name character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT faculties_pkey PRIMARY KEY (facultyid)
);

CREATE TABLE IF NOT EXISTS public.lecturers
(
    lecturerid smallint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 32767 CACHE 1 ),
    degree character varying(255) COLLATE pg_catalog."default",
    firstname character varying(255) COLLATE pg_catalog."default",
    lastname character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT lecturers_pkey PRIMARY KEY (lecturerid)
);

CREATE TABLE IF NOT EXISTS public.students
(
    studentid integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    firstname character varying(255) COLLATE pg_catalog."default",
    lastname character varying(255) COLLATE pg_catalog."default",
    pesel character varying(255) COLLATE pg_catalog."default",
    semester smallint NOT NULL,
    CONSTRAINT students_pkey PRIMARY KEY (studentid)
);

CREATE TABLE IF NOT EXISTS public.students_courses
(
    students_studentid integer NOT NULL,
    courses_courseid smallint NOT NULL,
    CONSTRAINT students_courses_pkey PRIMARY KEY (students_studentid, courses_courseid)
);

CREATE TABLE IF NOT EXISTS public.students_faculties
(
    students_studentid integer NOT NULL,
    faculties_facultyid smallint NOT NULL,
    CONSTRAINT students_faculties_pkey PRIMARY KEY (students_studentid, faculties_facultyid)
);

ALTER TABLE IF EXISTS public.courses
    ADD CONSTRAINT fk7f3f3wsq704bc0j3yt93s47mg FOREIGN KEY (lecturer_lecturerid)
    REFERENCES public.lecturers (lecturerid) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.courses
    ADD CONSTRAINT fkffs742x54nsubt3f2ieoxwpte FOREIGN KEY (faculty_facultyid)
    REFERENCES public.faculties (facultyid) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.students_courses
    ADD CONSTRAINT fk67ux1sq9xvyhmymy1eb97ebgk FOREIGN KEY (courses_courseid)
    REFERENCES public.courses (courseid) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.students_courses
    ADD CONSTRAINT fk98ebwgwo6coyd40569wgvi2ej FOREIGN KEY (students_studentid)
    REFERENCES public.students (studentid) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.students_courses
    ADD CONSTRAINT fkiwspv0i0clfpm42q3e9amxnay FOREIGN KEY (students_studentid)
    REFERENCES public.students (studentid) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.students_courses
    ADD CONSTRAINT fkrq12vgxkxc2riha8guirbcp5g FOREIGN KEY (courses_courseid)
    REFERENCES public.courses (courseid) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.students_faculties
    ADD CONSTRAINT fk9feruih9bnjivk9gvffpxbbvm FOREIGN KEY (students_studentid)
    REFERENCES public.students (studentid) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.students_faculties
    ADD CONSTRAINT fkkoqgx8f3reewxdj9gskheo68q FOREIGN KEY (students_studentid)
    REFERENCES public.students (studentid) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.students_faculties
    ADD CONSTRAINT fkrfy5iefnsgnbp20t2p2q6b9sb FOREIGN KEY (faculties_facultyid)
    REFERENCES public.faculties (facultyid) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.students_faculties
    ADD CONSTRAINT fks4jrrir8r10crqyu2yylfjnpn FOREIGN KEY (faculties_facultyid)
    REFERENCES public.faculties (facultyid) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;

END;